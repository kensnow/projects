{"ast":null,"code":"import _classCallCheck from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/ken/dev/projects/pretty-bls/src/Chart.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport { withChartContext } from \"./DataProvider\";\n\nvar Chart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Chart, _Component);\n\n  //need helper functions to parse data & determine chart type\n  function Chart(props) {\n    var _this;\n\n    _classCallCheck(this, Chart);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Chart).call(this, props));\n    _this.state = {\n      width: 0,\n      height: 0\n    };\n    _this.createBarChart = _this.createBarChart.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateWindowDimensions = _this.updateWindowDimensions.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Chart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.createBarChart();\n      this.updateWindowDimensions();\n      window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.createBarChart();\n    }\n  }, {\n    key: \"updateWindowDimensions\",\n    value: function updateWindowDimensions() {\n      this.setState({\n        width: window.innerWidth < 400 ? 300 : Math.round(window.innerWidth * .8),\n        height: window.innerHeight < 600 ? 300 : Math.round(window.innerHeight * .6)\n      });\n    }\n  }, {\n    key: \"createBarChart\",\n    value: function createBarChart() {\n      var _this2 = this;\n\n      var node = this.node;\n      var data = this.props.data.values.reverse();\n      var dataMax = d3.max(this.props.data.values);\n      var dataMin = d3.min(this.props.data.values);\n      var yScale = d3.scaleLinear().domain([dataMin, dataMax]).range([dataMin, this.state.height]);\n      d3.select(node).selectAll(\"rect\").data(this.props.data.values).enter().append(\"rect\");\n      d3.select(node).selectAll(\"rect\").data(this.props.data.values).exit().remove();\n      d3.select(node).selectAll(\"rect\").data(this.props.data.values).style(\"fill\", '#fe9922').attr(\"x\", function (d, i) {\n        return i * 30;\n      }) //not sure about 25 here\n      .attr(\"y\", function (d) {\n        return _this2.state.height - yScale(d);\n      }).attr(\"height\", function (d) {\n        return yScale(d);\n      }).attr(\"width\", 10); //will need to consider making more dynamic\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"chart-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, this.props.title), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.props.subtitle), React.createElement(\"div\", {\n        className: \"chart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        ref: function ref(node) {\n          return _this3.node = node;\n        },\n        width: this.state.width,\n        height: this.state.height,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Chart;\n}(Component);\n\nexport default withChartContext(Chart);","map":{"version":3,"sources":["/home/ken/dev/projects/pretty-bls/src/Chart.js"],"names":["React","Component","d3","withChartContext","Chart","props","state","width","height","createBarChart","bind","updateWindowDimensions","window","addEventListener","setState","innerWidth","Math","round","innerHeight","node","data","values","reverse","dataMax","max","dataMin","min","yScale","scaleLinear","domain","range","select","selectAll","enter","append","exit","remove","style","attr","d","i","title","subtitle"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\n\nimport * as d3 from \"d3\"\n\nimport {withChartContext} from \"./DataProvider\"\n\nclass Chart extends Component{\n    //need helper functions to parse data & determine chart type\n    constructor(props){\n        super(props);\n        this.state = {width: 0, height:0}\n        this.createBarChart = this.createBarChart.bind(this)\n        this.updateWindowDimensions = this.updateWindowDimensions.bind(this)\n    }\n\n    componentDidMount(){\n        this.createBarChart()\n        this.updateWindowDimensions();\n        window.addEventListener(\"resize\", this.updateWindowDimensions)\n    }\n    componentDidUpdate(){\n        this.createBarChart()\n    }\n\n    updateWindowDimensions(){\n        this.setState({\n            width: window.innerWidth < 400 ? 300 : (Math.round(window.innerWidth * .8)),\n            height: window.innerHeight < 600 ? 300 : (Math.round(window.innerHeight * .6))\n        })\n    }\n    createBarChart(){\n        const node = this.node\n        const data = this.props.data.values.reverse()\n        const dataMax = d3.max(this.props.data.values)\n        const dataMin = d3.min(this.props.data.values)\n        const yScale = d3.scaleLinear()\n            .domain([dataMin, dataMax])\n            .range([dataMin, this.state.height])\n\n        d3.select(node)\n            .selectAll(\"rect\")\n            .data(this.props.data.values)\n            .enter()\n            .append(\"rect\")\n\n        d3.select(node)\n            .selectAll(\"rect\")\n            .data(this.props.data.values)\n            .exit()\n            .remove()\n\n        d3.select(node)\n            .selectAll(\"rect\")\n            .data(this.props.data.values)\n            .style(\"fill\",'#fe9922')\n            .attr(\"x\", (d,i) => i * 30) //not sure about 25 here\n            .attr(\"y\", d => this.state.height - yScale(d))\n            .attr(\"height\", d => yScale(d))\n            .attr(\"width\", 10) //will need to consider making more dynamic\n\n    }\n\n    render(){\n        return (\n                   \n                <div className=\"chart-wrapper\">\n                    <h3>{this.props.title}</h3>\n                    <h5>{this.props.subtitle}</h5>\n                    <div className=\"chart\">\n                        <svg ref={node => this.node = node} width={this.state.width} height={this.state.height}></svg>\n                    </div>\n                </div>\n\n        )\n    }\n}\n\nexport default withChartContext(Chart)\n"]},"metadata":{},"sourceType":"module"}