{"ast":null,"code":"import _classCallCheck from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/ken/dev/projects/pretty-bls/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/ken/dev/projects/pretty-bls/src/DataProvider.js\";\nimport React, { Component, createContext } from 'react';\nimport axios from \"axios\"; // import data from \"./data/blsDataSample.json\"\n\nvar _createContext = createContext(),\n    Consumer = _createContext.Consumer,\n    Provider = _createContext.Provider; //set initial state\n\n\nexport { Consumer, Provider };\nvar initialState = {\n  seriesID: \"\",\n  data: [],\n  loading: true,\n  errMsg: null // blsApi: \"https://api.bls.gov/publicAPI/v2/timeseries/data/\"\n  // const url = \"https://api.bls.gov/publicAPI/v2/timeseries/data/\"\n  // const url = \"https://swapi.co/api/people/\"\n  // const seriesID = \"LNS14000000\" //placeholder until I get buttons working\n\n};\n\nvar DataProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DataProvider, _Component);\n\n  function DataProvider() {\n    var _this;\n\n    _classCallCheck(this, DataProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DataProvider).call(this));\n    _this.state = initialState; //bind prototype functions\n\n    _this.resetState = _this.resetState.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getData = _this.getData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } //need to revert state upon each button click\n\n\n  _createClass(DataProvider, [{\n    key: \"resetState\",\n    value: function resetState() {\n      this.setState(initialState);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData(seriesID) {\n      var _this2 = this;\n\n      // this.resetState();\n      //placeholder for now until working, will switch out for seriesID once running\n      // let id = this.seriesID\n      return axios.get(\"https://api.bls.gov/publicAPI/v2/timeseries/data/\" + seriesID).then(function (response) {\n        return _this2.setState({\n          series: seriesID,\n          data: response.data.Results.series[0],\n          loading: false,\n          errMsg: false\n        });\n      }).catch(function (errMsg) {\n        return _this2.setState({\n          loading: false,\n          errMsg: \"Cannot get data\"\n        });\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(button) {\n      ///make get data call with series ID, send state down to chart\n      this.getData(button.series_id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.data);\n      var chartContext = {\n        data: this.state.data,\n        getDataInfo: this.handleClick\n      };\n      return React.createElement(Provider, {\n        value: chartContext,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return DataProvider;\n}(Component);\n\nexport { DataProvider as default };\nexport var withChartContext = function withChartContext(C) {\n  return function (Cprops) {\n    return React.createElement(Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, function (value) {\n      return React.createElement(C, Object.assign({}, value, Cprops, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }));\n    });\n  };\n};","map":{"version":3,"sources":["/home/ken/dev/projects/pretty-bls/src/DataProvider.js"],"names":["React","Component","createContext","axios","Consumer","Provider","initialState","seriesID","data","loading","errMsg","DataProvider","state","resetState","bind","getData","handleClick","setState","get","then","response","series","Results","catch","button","series_id","console","log","chartContext","getDataInfo","props","children","withChartContext","C","Cprops","value"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,aAA3B,QAAgD,OAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;qBAEoCD,aAAa,E;IAAnCE,Q,kBAAAA,Q;IAAUC,Q,kBAAAA,Q,EAExB;;;;AACA,IAAMC,YAAY,GAAG;AACjBC,EAAAA,QAAQ,EAAC,EADQ;AAEjBC,EAAAA,IAAI,EAAC,EAFY;AAGjBC,EAAAA,OAAO,EAAE,IAHQ;AAIjBC,EAAAA,MAAM,EAAE,IAJS,CAKjB;AAGJ;AACA;AACA;;AAVqB,CAArB;;IAaqBC,Y;;;;;AACjB,0BAAa;AAAA;;AAAA;;AACT;AACA,UAAKC,KAAL,GAAaN,YAAb,CAFS,CAIT;;AACA,UAAKO,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,uDAAlB;AACA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaD,IAAb,uDAAf;AACA,UAAKE,WAAL,GAAmB,MAAKA,WAAL,CAAiBF,IAAjB,uDAAnB;AAPS;AAQZ,G,CAED;;;;;iCACY;AACR,WAAKG,QAAL,CAAcX,YAAd;AACH;;;4BAEOC,Q,EAAS;AAAA;;AACb;AACA;AACA;AACA,aAAOJ,KAAK,CAACe,GAAN,CAAU,sDAAoDX,QAA9D,EACFY,IADE,CACI,UAAAC,QAAQ;AAAA,eACX,MAAI,CAACH,QAAL,CAAc;AACVI,UAAAA,MAAM,EAAEd,QADE;AAEVC,UAAAA,IAAI,EAAEY,QAAQ,CAACZ,IAAT,CAAcc,OAAd,CAAsBD,MAAtB,CAA6B,CAA7B,CAFI;AAGVZ,UAAAA,OAAO,EAAE,KAHC;AAIVC,UAAAA,MAAM,EAAE;AAJE,SAAd,CADW;AAAA,OADZ,EAQFa,KARE,CAQK,UAAAb,MAAM;AAAA,eACV,MAAI,CAACO,QAAL,CAAc;AACXR,UAAAA,OAAO,EAAC,KADG;AAEXC,UAAAA,MAAM,EAAC;AAFI,SAAd,CADU;AAAA,OARX,CAAP;AAgBH;;;gCAEWc,M,EAAO;AAEf;AACA,WAAKT,OAAL,CAAaS,MAAM,CAACC,SAApB;AAEH;;;6BAEQ;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKf,KAAL,CAAWJ,IAAvB;AACA,UAAMoB,YAAY,GAAG;AACjBpB,QAAAA,IAAI,EAAE,KAAKI,KAAL,CAAWJ,IADA;AAEjBqB,QAAAA,WAAW,EAAE,KAAKb;AAFD,OAArB;AAKA,aACI,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAEY,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKE,KAAL,CAAWC,QADhB,CADJ;AAKH;;;;EAzDqC9B,S;;SAArBU,Y;AA4DrB,OAAO,IAAMqB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,CAAC;AAAA,SAAI,UAAAC,MAAM;AAAA,WACvC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,UAAAC,KAAK;AAAA,aAAI,oBAAC,CAAD,oBAAOA,KAAP,EAAiBD,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAJ;AAAA,KADV,CADuC;AAAA,GAAV;AAAA,CAA1B","sourcesContent":["import React, { Component, createContext } from 'react'\nimport axios from \"axios\"\n\n// import data from \"./data/blsDataSample.json\"\n\nexport const {Consumer, Provider} = createContext()\n\n//set initial state\nconst initialState = {\n    seriesID:\"\",\n    data:[],\n    loading: true,\n    errMsg: null,\n    // blsApi: \"https://api.bls.gov/publicAPI/v2/timeseries/data/\"\n}\n\n// const url = \"https://api.bls.gov/publicAPI/v2/timeseries/data/\"\n// const url = \"https://swapi.co/api/people/\"\n// const seriesID = \"LNS14000000\" //placeholder until I get buttons working\n\n\nexport default class DataProvider extends Component {\n    constructor(){\n        super();\n        this.state = initialState\n\n        //bind prototype functions\n        this.resetState = this.resetState.bind(this)\n        this.getData = this.getData.bind(this)\n        this.handleClick = this.handleClick.bind(this)\n    }\n\n    //need to revert state upon each button click\n    resetState(){\n        this.setState(initialState)\n    }\n\n    getData(seriesID){\n        // this.resetState();\n        //placeholder for now until working, will switch out for seriesID once running\n        // let id = this.seriesID\n        return axios.get(\"https://api.bls.gov/publicAPI/v2/timeseries/data/\"+seriesID)\n            .then( response => \n                this.setState({\n                    series: seriesID,\n                    data: response.data.Results.series[0],\n                    loading: false,\n                    errMsg: false\n                }))\n            .catch( errMsg => \n                this.setState({\n                   loading:false,\n                   errMsg:\"Cannot get data\"     \n            }))\n\n        \n\n    }\n\n    handleClick(button){\n        \n        ///make get data call with series ID, send state down to chart\n        this.getData(button.series_id)\n        \n    }\n\n    render() {\n        console.log(this.state.data)\n        const chartContext = {\n            data: this.state.data,\n            getDataInfo: this.handleClick\n        }\n\n        return (\n            <Provider value={chartContext}>\n                {this.props.children}\n            </Provider>\n        )\n    }\n}\n\nexport const withChartContext = C => Cprops => (\n    <Consumer>\n        {value => <C {...value}{...Cprops} />}\n    </Consumer>\n)"]},"metadata":{},"sourceType":"module"}